<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cheney.dao.EmployeeDao" >
  <resultMap id="EmployeeResultMap" type="com.cheney.entity.Employee" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="username" property="username" jdbcType="VARCHAR" />
    <result column="pass" property="pass" jdbcType="VARCHAR" />
    <result column="nickname" property="nickname" jdbcType="VARCHAR" />
    <result column="realname" property="realname" jdbcType="VARCHAR" />
    <result column="jobInfoId" property="jobInfoId" jdbcType="INTEGER" />
    <result column="departmentId" property="departmentId" jdbcType="INTEGER" />
    <result column="phoneNo" property="phoneNo" jdbcType="VARCHAR" />
    <result column="officeTel" property="officeTel" jdbcType="VARCHAR" />
    <result column="workStatu" property="workStatu" jdbcType="VARCHAR" />
    <association property="department" javaType="com.cheney.entity.Department">
    	<id column="id" property="id" jdbcType="INTEGER" />
    	<result column="dname" property="dname" jdbcType="CHAR" />
    </association>
    <association property="jobInfo" javaType="com.cheney.entity.Jobinfo">
		<id column="id" property="id" jdbcType="INTEGER" />
	    <result column="job" property="job" jdbcType="CHAR" />
	    <result column="departmentId" property="departmentId" jdbcType="INTEGER" />
    </association>
    
    
  </resultMap>
  <select id="selectByNameAndPass" resultMap="EmployeeResultMap">
  	SELECT * FROM employee
  	WHERE
  	username = #{username}
  	AND
  	pass = #{pass}
  </select>
  <select id="queryByJobInfo" resultMap="EmployeeResultMap">
 	SELECT * FROM employee
 	WHERE
 	jobinfoid = #{jobInfoId}
  </select>
  
  <select id="selectAllEmployee" resultMap="EmployeeResultMap">
  	SELECT E.id,E.nickname,E.realname,E.phoneNo,E.officeTel,D.dname,J.job 
  	FROM employee E
  	LEFT JOIN department D ON E.departmentId = D.id
  	LEFT JOIN jobInfo J ON E.jobInfoId = J.id
  </select>
  
  <select id="selectEmployBydepaartmentId" resultMap="EmployeeResultMap">
  	select * From employee
  	<if test="departmentId!=null">
  	where departmentId = #{departmentId}
  	AND jobInfoId = #{jobInfoId}
  	</if>
  </select>
  
  
</mapper>